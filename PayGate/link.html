<!DOCTYPE html>
<html lang="vi" class="h-full bg-gray-50">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <title>PayGate URL Generator</title>
    <style>
        body {
            font-family: 'Be Vietnam Pro', sans-serif;
        }
        .tooltip {
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.875rem;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.2s;
            pointer-events: none;
            background-color: #1f2937;
            color: #f9fafb;
        }
        .copy-btn:hover .tooltip {
            opacity: 1;
        }
    </style>
</head>

<body class="min-h-screen flex items-center justify-center p-4 bg-gray-100">

    <div class="w-full max-w-2xl mx-auto">
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-gray-800">
                <span class="text-blue-600">PayGate</span> URL Generator
            </h1>
            <p class="mt-2 text-gray-600">Công cụ tạo link chia sẻ cho cổng thanh toán.</p>
        </header>

        <main class="bg-white rounded-xl shadow-lg">
            <div class="p-6 sm:p-8 space-y-6">
                
                <!-- Base URL -->
                <div>
                    <label for="base-url" class="block text-sm font-semibold text-gray-700 mb-1">1. URL Gốc</label>
                    <input type="text" id="base-url"
                        class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm p-2.5"
                        placeholder="https://yourdomain.com/PayGate/" value="https://hunq.online/PayGate/">
                </div>

                <!-- Theme Selection -->
                <div>
                    <h3 class="text-sm font-semibold text-gray-700 mb-2">2. Giao diện (Theme)</h3>
                    <fieldset class="flex items-center gap-x-6">
                        <div class="flex items-center">
                            <input id="theme-normal" name="theme" type="radio" value="normal" checked
                                class="h-4 w-4 border-gray-300 text-blue-600 focus:ring-blue-600">
                            <label for="theme-normal" class="ml-2 block text-sm text-gray-900">Mặc định</label>
                        </div>
                        <div class="flex items-center">
                            <input id="theme-vip" name="theme" type="radio" value="vip"
                                class="h-4 w-4 border-gray-300 text-yellow-500 focus:ring-yellow-500">
                            <label for="theme-vip" class="ml-2 block text-sm text-gray-900">VIP</label>
                        </div>
                    </fieldset>
                </div>

                <!-- Region Selection -->
                <div>
                    <h3 class="text-sm font-semibold text-gray-700 mb-2">3. Khu vực hiển thị (Region)</h3>
                    <fieldset id="region-selection" class="flex flex-wrap items-center gap-x-6 gap-y-2">
                         <p class="text-xs text-gray-500 w-full">Nếu không chọn, trang sẽ hiển thị các phương thức "ALL".</p>
                        <div class="flex items-center">
                            <input id="region-vn" name="region" type="checkbox" value="VN"
                                class="h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-600">
                            <label for="region-vn" class="ml-2 block text-sm text-gray-900">Việt Nam (VN)</label>
                        </div>
                        <div class="flex items-center">
                            <input id="region-jp" name="region" type="checkbox" value="JP"
                                class="h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-600">
                            <label for="region-jp" class="ml-2 block text-sm text-gray-900">Nhật Bản (JP)</label>
                        </div>
                         <div class="flex items-center">
                            <input id="region-us" name="region" type="checkbox" value="US"
                                class="h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-600">
                            <label for="region-us" class="ml-2 block text-sm text-gray-900">Hoa Kỳ (US)</label>
                        </div>
                    </fieldset>
                </div>

                 <!-- Custom Content -->
                <div>
                    <label for="ref-content" class="block text-sm font-semibold text-gray-700 mb-1">4. Nội dung chuyển khoản (Ref)</label>
                    <input type="text" id="ref-content"
                        class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm p-2.5"
                        placeholder="VD: Thanh toan don hang #12345">
                </div>
            </div>

            <!-- Generated URL Output -->
            <div class="bg-gray-50 p-6 sm:p-8 rounded-b-xl mt-4">
                 <label for="generated-url" class="block text-sm font-semibold text-gray-700 mb-2">URL đã tạo</label>
                <div class="flex flex-col sm:flex-row gap-2">
                    <input type="text" id="generated-url" readonly
                        class="block w-full border-gray-300 rounded-md shadow-sm bg-gray-200 cursor-not-allowed sm:text-sm p-2.5 text-gray-600">
                    <button id="copy-button"
                        class="copy-btn relative w-full sm:w-auto flex-shrink-0 inline-flex justify-center items-center px-4 py-2.5 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors">
                        Sao chép Link
                        <span id="copy-tooltip" class="tooltip">Sao chép</span>
                    </button>
                </div>
            </div>
        </main>
        
        <footer class="text-center mt-8">
            <p class="text-sm text-gray-500">&copy; 2025 Hunq Store. Công cụ được tạo bởi AI.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // DOM Elements
            const baseUrlInput = document.getElementById('base-url');
            const themeRadios = document.querySelectorAll('input[name="theme"]');
            const regionCheckboxes = document.querySelectorAll('input[name="region"]');
            const refContentInput = document.getElementById('ref-content');
            const generatedUrlOutput = document.getElementById('generated-url');
            const copyButton = document.getElementById('copy-button');
            const copyTooltip = document.getElementById('copy-tooltip');

            function generateUrl() {
                let baseUrl = baseUrlInput.value.trim();
                // Ensure base URL ends with a slash if it's not empty
                if (baseUrl && !baseUrl.endsWith('/')) {
                    baseUrl += '/';
                }

                const params = [];

                // 1. Get Theme
                const selectedTheme = document.querySelector('input[name="theme"]:checked').value;
                if (selectedTheme === 'vip') {
                    params.push('VIP');
                }

                // 2. Get Regions
                const selectedRegions = [];
                regionCheckboxes.forEach(checkbox => {
                    if (checkbox.checked) {
                        selectedRegions.push(checkbox.value);
                    }
                });
                params.push(...selectedRegions);

                // 3. Get Ref Content
                const refContent = refContentInput.value.trim();
                if (refContent) {
                    // Encode the content to make it URL-safe
                    params.push(`Ref=${encodeURIComponent(refContent)}`);
                }

                // 4. Combine everything
                if (params.length > 0) {
                    generatedUrlOutput.value = `${baseUrl}?${params.join('&')}`;
                } else {
                    generatedUrlOutput.value = baseUrl;
                }
            }

            function copyUrlToClipboard() {
                const urlToCopy = generatedUrlOutput.value;
                if (!urlToCopy) return;

                navigator.clipboard.writeText(urlToCopy).then(() => {
                    copyButton.classList.remove('bg-blue-600', 'hover:bg-blue-700');
                    copyButton.classList.add('bg-green-600');
                    copyButton.textContent = 'Đã chép!';
                    copyTooltip.textContent = 'Đã chép!';

                    setTimeout(() => {
                        copyButton.classList.remove('bg-green-600');
                        copyButton.classList.add('bg-blue-600', 'hover:bg-blue-700');
                        copyButton.textContent = 'Sao chép Link';
                        copyTooltip.textContent = 'Sao chép';
                    }, 2000);
                }).catch(err => {
                    console.error('Failed to copy: ', err);
                    copyTooltip.textContent = 'Lỗi!';
                     setTimeout(() => {
                        copyTooltip.textContent = 'Sao chép';
                    }, 2000);
                });
            }

            // Event Listeners
            baseUrlInput.addEventListener('input', generateUrl);
            refContentInput.addEventListener('input', generateUrl);
            themeRadios.forEach(radio => radio.addEventListener('change', generateUrl));
            regionCheckboxes.forEach(checkbox => checkbox.addEventListener('change', generateUrl));
            copyButton.addEventListener('click', copyUrlToClipboard);
            
            // Initial generation on page load
            generateUrl();
        });
    </script>
</body>

</html>
