// Äá»‘i tÆ°á»£ng chá»©a cÃ¡c báº£n dá»‹ch
const translations = {
    vi: {
        welcomeText: "Xin chÃ o",
        Fullname: "Äinh Máº¡nh HÃ¹ng",
        Position: "Ká»¹ thuáº­t CÆ¡ Äiá»‡n Tá»­",
        Quote: "Mong muá»‘n phÃ¡t triá»ƒn ká»¹ nÄƒng vÃ  kiáº¿n thá»©c trong ká»¹ thuáº­t cÆ¡ Ä‘iá»‡n tá»­, há»c há»i cÃ´ng nghá»‡ má»›i vÃ  Ä‘Ã³ng gÃ³p vÃ o dá»± Ã¡n thá»±c táº¿ Ä‘á»ƒ trá»Ÿ thÃ nh chuyÃªn gia trong tÆ°Æ¡ng lai.",
        BtnHireMe: "Tuyá»ƒn dá»¥ng",
        BtnDownloadCV: "Táº£i CV",
        Location: "Viá»‡t Nam ğŸ‡»ğŸ‡³",
        

        QualificationsText: "Báº±ng cáº¥p",
        SkillsText: "KÄ© nÄƒng",
        ProjectText: "Dá»± Ã¡n",
        StoreText: "Cá»­a hÃ ng",

        HideInfo: "ThÃ´ng tin bá»‹ áº©n, Chá»‰ hiá»ƒn thá»‹ khi nháº­p mÃ£ tuyá»ƒn dá»¥ng.",

        DevText: "Láº­p trÃ¬nh",

        SkillNote: "*CÃ¡c Ä‘Ã¡nh giÃ¡ nÃ y Ä‘Æ°á»£c dá»±a trÃªn Ä‘Ã¡nh giÃ¡ tá»« nhá»¯ng ngÆ°á»i cÃ³ kinh nghiá»‡m chuyÃªn ngÃ nh.",
        Skill1: "CÆ¡ Ä‘iá»‡n tá»­",
        Skill2: "Láº­p trÃ¬nh PLC",
        Skill3: "Tin há»c vÄƒn phÃ²ng",
        Skill4: "Láº­p trÃ¬nh Web [Front-End]",
        Skill5: "Auto CAD",
        Skill6: "Láº­p trÃ¬nh Arduino, Vi xá»­ lÃ½",

        ExpText: "Kinh nghiá»‡m",
        Exp1: "Tá»‘t nghiá»‡p trung há»c phá»• thÃ´ng",
        Exp2: "Tá»‘t nghiá»‡p Cao Ä‘áº³ng CÆ¡ Äiá»‡n Tá»­ tiÃªu chuáº©n Äá»©c",
        Exp3: "CTY TNHH Ká»¸ THUáº¬T ELECOM VIá»†T NAM",
        Exp3a: "Thá»±c táº­p sinh",
        Exp3b: "Há»c há»i vá» quy trÃ¬nh vÃ  cÃ´ng nghá»‡ cÆ¡ Ä‘iá»‡n tá»­",
        Exp4: "Ká»¹ thuáº­t",
        Exp4a: "Kiá»ƒm tra & sá»­a chá»¯a Motor Ä‘iá»‡n, Láº­p trÃ¬nh PLC.",
        TimeExp5: "1/2025",
        Exp5: "CTY CP THIáº¾T Káº¾ VÃ€ QUáº¢N LÃ Ká»¸ THUáº¬T IMPC",
        Exp5a: "Ká»¹ thuáº­t & GiÃ¡m sÃ¡t",
        Exp5b: `Xá»­ lÃ½ sá»± cá»‘ há»‡ thá»‘ng Ä‘iá»‡n: Kháº¯c phá»¥c cÃ¡c lá»—i nhÆ° máº¥t Ä‘iá»‡n, lá»—i thiáº¿t bá»‹.
        <br>GiÃ¡m sÃ¡t há»‡ thá»‘ng phÃ²ng chÃ¡y chá»¯a chÃ¡y: Kiá»ƒm tra thiáº¿t bá»‹, kiá»ƒm soÃ¡t cÃ¡c nguá»“n chÃ¡y ná»•, Ä‘Ã o táº¡o vá» phÃ²ng chÃ¡y chá»¯a chÃ¡y. 
        <br>GiÃ¡m sÃ¡t an toÃ n lao Ä‘á»™ng: Nháº¯c nhá»Ÿ, phá»• biáº¿n, huáº¥n luyá»‡n an toÃ n cho nhÃ  tháº§u thi cÃ´ng.
        <br>GiÃ¡m sÃ¡t an ninh tráº­t tá»± trong quáº£n lÃ½ dá»± Ã¡n`,

        LanguagesText: "Ngoáº¡i ngá»¯",
        LanEN: "Tiáº¿ng Anh B2",
        LanJA: "Tiáº¿ng Nháº­t N4",

        Cer1: "Cao Ä‘áº³ng CÆ¡ Äiá»‡n Tá»­ - TiÃªu chuáº©n Äá»©c",
        Cer1a: "TrÆ°á»ng Cao Ä‘áº³ng CÃ´ng nghá»‡ Quá»‘c táº¿ LILAMA2",

    },
    en: {
        welcomeText: "Hello",
        Fullname: "Dinh Manh Hung",
        Position: "Mechatronics Engineering",
        Quote: "*Desiring to develop skills and knowledge in mechatronics engineering, learn new technologies, and contribute to real-world projects to become an expert in the future.",
        BtnHireMe: "Hire Me",
        BtnDownloadCV: "Download CV",
        Location: "Viet Nam ğŸ‡»ğŸ‡³",

        QualificationsText: "Qualifications",
        SkillsText: "Skills",
        ProjectText: "Project",
        StoreText: "Store",

        HideInfo: "Information is hidden, Only displayed when entering recruitment code.",

        DevText: "Developer",

        SkillNote: "*These evaluations are based on assessments from experienced professionals in the field.",
        Skill1: "Mechatronics",
        Skill2: "PLC Programming",
        Skill3: "Office Computing",
        Skill4: "Web Programming [Front-End]",
        Skill5: "Auto CAD",
        Skill6: "Arduino Programming, Microcontroller",

        ExpText: "Experience",
        Exp1: "High School Graduate",
        Exp2: "Graduated from German-standard Mechatronics College",
        Exp3: "ELECOM VIETNAM TECHNICAL CO., LTD",
        Exp3a: "Intern",
        Exp3b: "Learning about mechatronics processes and technology",
        Exp4: "Technical",
        Exp4a: "Inspect & repair electric motors, PLC.",
        TimeExp5: "1/2025",
        Exp5: "IMPC ENGINEERING DESIGN AND MANAGEMENT JSC",
        Exp5a: "Technical & Supervision",
        Exp5b: `Handling electrical system issues: Troubleshooting issues like power outages, equipment failures.
        <br>Supervising fire protection systems: Inspecting equipment, monitoring fire/explosion sources, providing fire protection training.
        <br>Supervising labor safety: Reminding, educating, and training safety practices for contractors.
        <br>Supervising security and order in project management.`,

        LanguagesText: "Languages",
        LanEN: "English B2",
        LanJA: "JLPT N4",

        Cer1: "College of Mechatronics - German Standard",
        Cer1a: "LILAMA2 International Technology College"
    },
    ja: {
        welcomeText: "ã“ã‚“ã«ã¡ã¯",
        Fullname: "ãƒ‡ã‚£ãƒ³ ãƒãƒ³ ãƒ•ãƒ³",
        Position: "ãƒ¡ã‚«ãƒˆãƒ­ãƒ‹ã‚¯ã‚¹å·¥å­¦",
        Quote: "ãƒ¡ã‚«ãƒˆãƒ­ãƒ‹ã‚¯ã‚¹ã®ã‚¹ã‚­ãƒ«ã¨çŸ¥è­˜ã‚’ä¼¸ã°ã—ãŸã„ã§ã™ã€‚ãã—ã¦ã€æ–°ã—ã„æŠ€è¡“ã‚’å­¦ã³ã€å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å‚åŠ ã—ã¦ã€å°†æ¥å°‚é–€å®¶ã«ãªã‚ŠãŸã„ã§ã™.",
        BtnHireMe: "ç§ã‚’é›‡ã£ã¦ãã ã•ã„",
        BtnDownloadCV: "å±¥æ­´æ›¸ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰",
        Location: "ãƒ™ãƒˆãƒŠãƒ  ğŸ‡»ğŸ‡³",

        QualificationsText: "è³‡æ ¼",
        SkillsText: "ã‚¹ã‚­ãƒ«",
        ProjectText: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ",
        StoreText: "ã‚·ãƒ§ãƒƒãƒ—",

        HideInfo: " æƒ…å ±ã¯éè¡¨ç¤ºã€æ¡ç”¨ã‚³ãƒ¼ãƒ‰å…¥åŠ›æ™‚ã®ã¿è¡¨ç¤º",
        DevText: "é–‹ç™ºè€… ",

        SkillNote: "*ã“ã‚Œã‚‰ã®è©•ä¾¡ã¯ã€å°‚é–€åˆ†é‡ã§çµŒé¨“ã®ã‚ã‚‹äººã®è©•ä¾¡ã«åŸºã¥ã„ã¦ã„ã¾ã™ã€‚",
        Skill1: "ãƒ¡ã‚«ãƒˆãƒ­ãƒ‹ã‚¯ã‚¹",
        Skill2: "PLCãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°",
        Skill3: "ã‚ªãƒ•ã‚£ã‚¹ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°",
        Skill4: "ã‚¦ã‚§ãƒ–ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚° [ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰]",
        Skill5: "ã‚ªãƒ¼ãƒˆCAD",
        Skill6: "Arduinoãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã€ãƒã‚¤ã‚¯ãƒ­ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼",

        ExpText: "çµŒé¨“ (ã‘ã„ã‘ã‚“)",
        Exp1: "é«˜æ ¡å’æ¥­",
        Exp2: "ãƒ‰ã‚¤ãƒ„åŸºæº–ã®ãƒ¡ã‚«ãƒˆãƒ­ãƒ‹ã‚¯ã‚¹å°‚é–€å­¦æ ¡å’æ¥­",
        Exp3: "ELECOM VIETNAM æŠ€è¡“æœ‰é™ä¼šç¤¾",
        Exp3a: "ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³",
        Exp3b: "ãƒ¡ã‚«ãƒˆãƒ­ãƒ‹ã‚¯ã‚¹ã®ãƒ—ãƒ­ã‚»ã‚¹ã¨æŠ€è¡“ã«ã¤ã„ã¦å­¦ã¶",
        Exp4: "æŠ€è¡“",
        Exp4a: "é›»å‹•ãƒ¢ãƒ¼ã‚¿ãƒ¼ã®æ¤œæŸ»ã¨ä¿®ç†, PLCãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã€‚",
        TimeExp5: "1/2025",
        Exp5: "IMPCè¨­è¨ˆã¨æŠ€è¡“ç®¡ç†æ ªå¼ä¼šç¤¾",
        Exp5a: "æŠ€è¡“ã¨ç›£ç£",
        Exp5b: `é›»æ°—ã‚·ã‚¹ãƒ†ãƒ ã®å•é¡Œå¯¾å¿œ: åœé›»ã€è¨­å‚™æ•…éšœãªã©ã®å•é¡Œã‚’è§£æ±ºã€‚
<br>é˜²ç«ã‚·ã‚¹ãƒ†ãƒ ã®ç›£è¦–: æ©Ÿå™¨ã®ç‚¹æ¤œã€ç«ç½ã‚„çˆ†ç™ºæºã®ç®¡ç†ã€é˜²ç«è¨“ç·´ã€‚
<br>åŠ´åƒå®‰å…¨ã®ç›£è¦–: æ–½å·¥æ¥­è€…ã¸ã®æ³¨æ„å–šèµ·ã€æ•™è‚²ã€å®‰å…¨è¨“ç·´ã€‚
<br>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†ã®æ²»å®‰ã¨ç§©åºã®ç›£è¦–ã€‚`,
        LanguagesText: "è¨€èª (ã’ã‚“ã”)",
        LanEN: "è‹±èª B2",
        LanJA: "JLPT N4",

        Cer1: "ãƒ¡ã‚«ãƒˆãƒ­ãƒ‹ã‚¯ã‚¹å°‚é–€å­¦æ ¡ - ãƒ‰ã‚¤ãƒ„åŸºæº–",
        Cer1a: "LILAMA2å›½éš›æŠ€è¡“å°‚é–€å­¦æ ¡"
    },
    zh: {
        "welcomeText": "ä½ å¥½",
        "Fullname": "ä¸å­Ÿé›„",
        "Position": "æœºç”µå·¥ç¨‹",
        "Quote": "å¸Œæœ›åœ¨æœºç”µå·¥ç¨‹é¢†åŸŸæå‡æŠ€èƒ½å’ŒçŸ¥è¯†ï¼Œå­¦ä¹ æ–°æŠ€æœ¯å¹¶å‚ä¸å®é™…é¡¹ç›®ï¼Œä¸ºæˆä¸ºæœªæ¥çš„ä¸“å®¶è€ŒåŠªåŠ›ã€‚",
        "BtnHireMe": "æ‹›è˜",
        "BtnDownloadCV": "ä¸‹è½½ç®€å†",
        Location: "è¶Šå— ğŸ‡»ğŸ‡³",

        "QualificationsText": "å­¦å†",
        "SkillsText": "æŠ€èƒ½",
        "ProjectText": "é¡¹ç›®",
        "StoreText": "å•†åº—",

        "HideInfo": "ä¿¡æ¯éšè—ï¼Œä»…è¾“å…¥æ‹›è˜ç æ—¶æ˜¾ç¤º",

        "DevText": "ç¼–ç¨‹",

        "SkillNote": "*è¿™äº›è¯„ä¼°åŸºäºæœ‰è¡Œä¸šç»éªŒçš„ä¸“ä¸šäººå£«çš„è¯„ä»·ã€‚",
        "Skill1": "æœºç”µå·¥ç¨‹",
        "Skill2": "PLCç¼–ç¨‹",
        "Skill3": "åŠå…¬è½¯ä»¶",
        "Skill4": "ç½‘é¡µç¼–ç¨‹ [å‰ç«¯]",
        "Skill5": "Auto CAD",
        "Skill6": "Arduinoå’Œå¾®å¤„ç†å™¨ç¼–ç¨‹",

        "ExpText": "ç»éªŒ",
        "Exp1": "é«˜ä¸­æ¯•ä¸š",
        "Exp2": "å¾·å›½æ ‡å‡†æœºç”µå·¥ç¨‹ä¸“ç§‘æ¯•ä¸š",
        "Exp3": "è¶Šå—ELECOMæŠ€æœ¯æœ‰é™å…¬å¸",
        "Exp3a": "å®ä¹ ç”Ÿ",
        "Exp3b": "å­¦ä¹ æœºç”µå·¥ç¨‹çš„æµç¨‹å’ŒæŠ€æœ¯",
        "Exp4": "æŠ€æœ¯",
        "Exp4a": "ç”µåŠ¨æœºçš„æ£€æŸ¥å’Œç»´ä¿®",
        "TimeExp5": "1/2025",
        "Exp5": "IMPCè®¾è®¡ä¸æŠ€æœ¯ç®¡ç†è‚¡ä»½å…¬å¸",
        "Exp5a": "æŠ€æœ¯ä¸ç›‘ç£",
        "Exp5b": "å¤„ç†ç”µåŠ›ç³»ç»Ÿé—®é¢˜ï¼šè§£å†³ç”µåŠ›ä¸­æ–­ã€è®¾å¤‡æ•…éšœç­‰é—®é¢˜ã€‚<br>æ¶ˆé˜²ç³»ç»Ÿç›‘æ§ï¼šæ£€æŸ¥è®¾å¤‡ï¼Œæ§åˆ¶ç«ç¾æºï¼Œè¿›è¡Œæ¶ˆé˜²åŸ¹è®­ã€‚<br>èŒä¸šå®‰å…¨ç›‘ç£ï¼šæé†’ã€å®£ä¼ å’ŒåŸ¹è®­æ–½å·¥æ‰¿åŒ…å•†çš„å®‰å…¨æªæ–½ã€‚<br>é¡¹ç›®ç®¡ç†ä¸­çš„ç§©åºä¸å®‰å…¨ç›‘æ§ã€‚",

        LanguagesText: "èªè¨€",
        LanEN: "è‹±èª B2",
        LanJA: "JLPT N4",

        Cer1: "æœºç”µä¸€ä½“åŒ–å­¦é™¢ - å¾·å›½æ ‡å‡†",
        Cer1a: "LILAMA2å›½é™…æŠ€æœ¯å­¦é™¢",
    },
    de: {
        welcomeText: "Hallo",
        Fullname: "Dinh Manh Hung",
        Position: "Mechatronik-Ingenieurwesen",
        Quote: "*Ich mÃ¶chte meine FÃ¤higkeiten und Kenntnisse im Bereich Mechatronik-Ingenieurwesen weiterentwickeln, neue Technologien erlernen und zu realen Projekten beitragen, um in Zukunft ein Experte zu werden.",
        BtnHireMe: "Stellen Sie mich ein",
        BtnDownloadCV: "Lebenslauf herunterladen",
        Location: "Vietnam ğŸ‡»ğŸ‡³",

        QualificationsText: "Qualifikationen",
        SkillsText: "FÃ¤higkeiten",
        ProjectText: "Projekt",
        StoreText: "Shop",

        HideInfo: "Informationen sind ausgeblendet und werden nur bei Eingabe des Rekrutierungscodes angezeigt.",

        DevText: "Entwickler",

        SkillNote: "*Diese Bewertungen basieren auf EinschÃ¤tzungen erfahrener Fachleute auf diesem Gebiet.",
        Skill1: "Mechatronik",
        Skill2: "SPS-Programmierung",
        Skill3: "BÃ¼ro-IT",
        Skill4: "Webprogrammierung [Front-End]",
        Skill5: "Auto CAD",
        Skill6: "Arduino-Programmierung, Mikrocontroller",

        ExpText: "Erfahrung",
        Exp1: "Abitur",
        Exp2: "Abschluss am Deutsch-Standard Mechatronik Kolleg",
        Exp3: "ELECOM VIETNAM TECHNICAL CO., LTD",
        Exp3a: "Praktikant",
        Exp3b: "Einblick in mechatronische Prozesse und Technologie",
        Exp4: "Techniker",
        Exp4a: "Elektromotoren prÃ¼fen und reparieren",
        TimeExp5: "1/2025",
        Exp5: "IMPC ENGINEERING DESIGN AND MANAGEMENT JSC",
        Exp5a: "Technik & Aufsicht",
        Exp5b: `Behebung von Problemen mit elektrischen Systemen: Fehlersuche bei StromausfÃ¤llen, GerÃ¤teausfÃ¤llen.
        <br>Ãœberwachung von Brandschutzsystemen: ÃœberprÃ¼fung der AusrÃ¼stung, Ãœberwachung von Brand-/Explosionsquellen, DurchfÃ¼hrung von Brandschutzschulungen.
        <br>Ãœberwachung der Arbeitssicherheit: Erinnern, AufklÃ¤ren und Schulen von SicherheitsmaÃŸnahmen fÃ¼r Auftragnehmer.
        <br>Ãœberwachung von Sicherheit und Ordnung im Projektmanagement.`,

        LanguagesText: "Sprachen",
        LanEN: "Englisch B2",
        LanJA: "JLPT N4",

        Cer1: "Mechatronik Kolleg - Deutscher Standard",
        Cer1a: "LILAMA2 International Technology College"
    }
};


// ======= UPDATE FLAG IMAGE BASED ON LANGUAGE =======
function updateFlag(language) {
    const flagMap = {
        'vi': './Asset/icon/flag/Vietnam.png',
        'en': './Asset/icon/flag/US.png',
        'de': './Asset/icon/flag/germany.png',
        'ja': './Asset/icon/flag/Japan.png',
        'zh': './Asset/icon/flag/china.png',
    };
    document.getElementById('currentFlag').src = flagMap[language];
}

// ======= APPLY LANGUAGE =======
function applyLanguage(language) {
    const body = document.body.classList;
    body.remove('en', 'vi', 'ja', 'zh', 'de');
    body.add(language);
    document.querySelectorAll('[data-translate]').forEach(el => {
        const key = el.getAttribute('data-translate');
        el.innerHTML = translations[language][key] || el.innerHTML;
    });
}

// ======= SET LANGUAGE =======
function setLanguage(language, flagSrc) {
    // localStorage.setItem('language', language);
    applyLanguage(language);
    document.getElementById('currentFlag').src = flagSrc;
    document.getElementById('languageDropdown').classList.remove('show');
}

// ======= TOGGLE DROPDOWN =======
function toggleDropdown() {
    document.getElementById('languageDropdown').classList.toggle('show');
}


// ======= INIT ON PAGE LOAD =======
document.addEventListener('DOMContentLoaded', async () => {
    const hashLang = window.location.hash.toUpperCase();
    const langFromHash = {
        '#JA': 'ja',
        '#VI': 'vi',
        '#EN': 'en',
        '#ZH': 'zh',
        '#DE': 'de' //
    };

    const flagMap = {
        'vi': './Asset/icon/flag/Vietnam.png',
        'en': './Asset/icon/flag/US.png',
        'ja': './Asset/icon/flag/Japan.png',
        'zh': './Asset/icon/flag/china.png',
        'de': './Asset/icon/flag/germany.png' 
    };

    // Function to detect language from IP using ip-api.com
    async function detectLanguageFromIP() {
        try {
            const yourIpInfoToken = '8c35ace05458e6'; // ÄÃ¢y lÃ  token báº¡n Ä‘Ã£ cung cáº¥p
            const response = await fetch(`https://ipinfo.io/json?token=${yourIpInfoToken}`);
            const data = await response.json();
            // console.log("Dá»¯ liá»‡u tá»« IPinfo.io:", data); // Ghi log Ä‘á»ƒ debug
    
            // ipinfo.io tráº£ vá» mÃ£ quá»‘c gia trong trÆ°á»ng 'country'
            // vÃ­ dá»¥: { "ip": "...", "country": "VN", ... }
            if (data && data.country) {
                const countryCode = data.country.toLowerCase(); // Láº¥y mÃ£ quá»‘c gia vÃ  chuyá»ƒn thÃ nh chá»¯ thÆ°á»ng
    
                const countryLangMap = {
                    'vn': 'vi', // Vietnam
                    'us': 'en', // United States
                    'gb': 'en', // United Kingdom
                    'jp': 'ja', // Japan
                    'cn': 'zh', // China
                    'de': 'de'  // Germany
                    // ThÃªm cÃ¡c mapping khÃ¡c náº¿u cáº§n
                };
    
                
                return countryLangMap[countryCode] || null; // Tráº£ vá» ngÃ´n ngá»¯ hoáº·c null náº¿u khÃ´ng cÃ³ mapping
            } else {
                console.error("IPinfo.io API request failed or no country data:", data ? data.error : "No data");
                return null;
            }
        } catch (error) {
            console.error("Error detecting language from IP (IPinfo.io):", error);
            return null;
        }
    }
    // Giáº£ sá»­ báº¡n cÃ³ cÃ¡c hÃ m nÃ y Ä‘Ã£ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a á»Ÿ nÆ¡i khÃ¡c
    // function applyLanguage(lang) { /* ... logic Ã¡p dá»¥ng ngÃ´n ngá»¯ ... */ }
    // function updateFlag(lang) { /* ... logic cáº­p nháº­t cá» ... */ }

    let language = langFromHash[hashLang];

    // if (!language) {
    //     language = localStorage.getItem('language');
    // }

    if (!language) {
        // Await the IP detection if language is not found from hash or local storage
        language = await detectLanguageFromIP();
    }

    if (!language) {
        language = 'vi'; // Fallback to 'vi' if no language is determined from any source
    }

    // Báº¡n cáº§n Ä‘áº£m báº£o ráº±ng hÃ m applyLanguage vÃ  updateFlag Ä‘Ã£ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a
    // VÃ­ dá»¥:
    applyLanguage(language);
    updateFlag(language);
    // console.log(`Final language determined: ${language}`);
    // Gá»i cÃ¡c hÃ m thá»±c táº¿ cá»§a báº¡n á»Ÿ Ä‘Ã¢y, vÃ­ dá»¥:
    window.applyLanguage(language); // Náº¿u chÃºng lÃ  global
    window.updateFlag(language);
});





// ======= THEME DARK / LIGHT =======
const themeToggle = document.getElementById('themeToggle');
const themeIcon = document.getElementById('themeIcon');
const currentTheme = localStorage.getItem('theme') || 'light';
document.body.classList.add(currentTheme + '-theme');
themeIcon.src = currentTheme === 'light' ? './Asset/icon/theme/sun.png' : './Asset/icon/theme/moon.png';

themeToggle.addEventListener('click', () => {
    const isLight = document.body.classList.contains('light-theme');
    const newTheme = isLight ? 'dark' : 'light';
    document.body.classList.toggle('light-theme');
    document.body.classList.toggle('dark-theme');
    themeIcon.src = newTheme === 'light' ? './Asset/icon/theme/sun.png' : './Asset/icon/theme/moon.png';
    localStorage.setItem('theme', newTheme);
});

// ======= PROGRESS BARS =======
document.querySelectorAll('.progress').forEach(progress => {
    const percentage = progress.getAttribute('data-percentage');
    const container = document.createElement('div');
    container.classList.add('progress-container');

    const barWrapper = document.createElement('div');
    barWrapper.classList.add('progress-bar-wrapper');

    const bar = document.createElement('div');
    bar.classList.add('progress-bar');
    bar.style.width = percentage + '%';

    barWrapper.appendChild(bar);
    container.appendChild(barWrapper);
    progress.appendChild(container);
});

// // ======= DOWNLOAD CV WITH RECRUITMENT CODE =======
// async function DownloadCV() {
//     const { value: password } = await Swal.fire({
//         title: "Recruitment Code",
//         input: "text",
//         inputLabel: "Password",
//         inputPlaceholder: "Recruitment Code",
//         inputAttributes: {
//             maxlength: "10",
//             autocapitalize: "off",
//             autocorrect: "off"
//         }
//     });

//     if (password) {
//         try {
//             const decrypted = CryptoJS.AES.decrypt(encryptedContactInfo, password).toString(CryptoJS.enc.Utf8);
//             if (decrypted) {
//                 document.getElementById("Download").innerHTML = decrypted;
//                 document.getElementById("Download").style.display = "block";
//                 Swal.fire("Access Granted!", "Contact details are now visible", "success");
//             } else {
//                 Swal.fire("Access Denied", "Incorrect password", "error");
//             }
//         } catch (e) {
//             Swal.fire("Access Denied", "Incorrect password", "error");
//         }
//     }
// }

// // ======= ENCRYPTED CONTACT INFO (MÃƒ HÃ“A Sáº´N) =======
// const encryptedContactInfo = "U2FsdGVkX18+/WQMYjScy5xZYU82uVGNZIfAnoF79uBZEVY7I2/RZ9UmEw8A6g00XlHVm7ZUBnQx2O1c4l4SQWQ1+brNt7bb/8nOfCs8cGnLWVjlz1MPxkBUZaj0XMTVH+MxcD0ODkb/Ilw0n0NfHOrkIh3n5wodM/q0vM2ebilMADuMC8sEctbMvQkez+K9wGiBvqOCi40z/NWarpV/Mw==";
