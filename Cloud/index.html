<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <link rel="stylesheet" href="./Asset/Style.css">
    <link rel="icon" href="/Asset/logo/logo.png">

    <!-- Biểu tượng iPhone -->
    <link rel="apple-touch-icon" href="/Asset/logo/logo.png" sizes="150x150">

    <!-- Primary Meta Tags -->
    <title>Hunq Cloud</title>
    <meta name="title" content="Hunq Upload" />
    <meta name="description" content="Dịch vụ đám mây của Đinh Mạnh Hùng" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="Hunq.online/Cloud/" />
    <meta property="og:title" content="Hunq Cloud" />
    <meta property="og:description" content="Dịch vụ đám mây của Đinh Mạnh Hùng" />
    <meta property="og:image" content="/Cloud/Asset/HunqCloud.png" />

    <!-- X (Twitter) -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="Hunq.online/Cloud/" />
    <meta property="twitter:title" content="Hunq Cloud" />
    <meta property="twitter:description" content="Dịch vụ đám mây của Đinh Mạnh Hùng" />
    <meta property="twitter:image" content="/Cloud/Asset/HunqCloud.png" />

</head>

<body>
    <div id="app">
        <div id="loadingScreen" class="min-h-screen">
            <div class="loader"></div>
        </div>
        <div id="authScreen" class="min-h-screen hidden">
            <div class="card" style="max-width: 420px; width: 100%;">
                <div id="loginView">
                    <h2 class="text-center">Đăng nhập</h2>
                    <p class="text-center text-secondary mb-6">Chào mừng trở lại!</p>
                    <form id="loginForm">
                        <div class="form-group"><label for="loginEmail" class="form-label">Email</label><input
                                type="email" id="loginEmail" class="form-input" required></div>
                        <div class="form-group"><label for="loginPassword" class="form-label">Mật khẩu</label><input
                                type="password" id="loginPassword" class="form-input" required></div><button
                            type="submit" class="btn btn-primary" style="width: 100%;">Đăng nhập</button>
                    </form>
                    <p class="text-center mt-4"><a href="#" id="showForgotPassword">Quên mật khẩu?</a></p>
                    <p class="text-center mt-4 text-secondary">Chưa có tài khoản? <a href="#" id="showRegister">Đăng ký
                            ngay</a></p>
                </div>
                <div id="registerView" class="hidden">
                    <h2 class="text-center">Tạo tài khoản</h2>
                    <form id="registerForm">
                        <div class="form-group"><label for="registerEmail" class="form-label">Email</label><input
                                type="email" id="registerEmail" class="form-input" required></div>
                        <div class="form-group"><label for="registerPassword" class="form-label">Mật khẩu</label><input
                                type="password" id="registerPassword" class="form-input" required></div>
                        <div class="form-group"><label for="inviteCode" class="form-label">Mã giới thiệu</label><input
                                type="text" id="inviteCode" class="form-input" required></div><button type="submit"
                            class="btn btn-primary" style="width: 100%;">Đăng ký</button>
                    </form>
                    <p class="text-center mt-4 text-secondary">Đã có tài khoản? <a href="#" id="showLogin">Đăng nhập</a>
                    </p>
                </div>
                <div id="forgotPasswordView" class="hidden">
                    <h2 class="text-center">Khôi phục mật khẩu</h2>
                    <form id="forgotPasswordForm">
                        <div class="form-group"><label for="forgotEmail" class="form-label">Email</label><input
                                type="email" id="forgotEmail" class="form-input" required></div><button type="submit"
                            class="btn btn-primary" style="width: 100%;">Gửi link khôi phục</button>
                    </form>
                    <p class="text-center mt-4"><a href="#" id="backToLogin">Quay lại đăng nhập</a></p>
                </div>
                <div id="authStatus" class="status-message" style="display: none;"></div>
            </div>
        </div>
        <div id="mainScreen" class="container hidden">
            <header class="main-header">
                <div>
                    <h1 style="font-size: 2rem; font-weight: 700; margin: 0;">Hunq Cloud</h1>
                    <p class="text-secondary" style="margin: 4px 0 0;">Xin chào, <span id="userEmailDisplay"></span>!
                    </p>
                </div>
                <div class="header-actions">
                    <button id="theme-toggle" class="theme-switcher" title="Đổi giao diện"><svg id="theme-icon-system"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                            <line x1="8" y1="21" x2="16" y2="21"></line>
                            <line x1="12" y1="17" x2="12" y2="21"></line>
                        </svg><svg id="theme-icon-light" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg><svg id="theme-icon-dark" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg></button>
                    <button id="logoutButton" class="btn-logout">Đăng xuất</button>
                </div>
            </header>
            <div class="card mb-6">
                <h2 class="card-title card-header">Tải lên tệp mới</h2>
                <div class="form-group">
                    <label for="fileInput" id="drop-zone" class="drop-zone"><svg class="drop-zone-icon"
                            xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M12 16.5V9.75m0 0l-3 3m3-3l3 3M6.75 19.5a4.5 4.5 0 01-1.41-8.775 5.25 5.25 0 0110.233-2.33 3 3 0 013.758 3.848A3.752 3.752 0 0118 19.5H6.75z" />
                        </svg>
                        <p>Kéo và thả tệp hoặc <span style="text-decoration: underline; color: var(--link-color);">nhấp
                                để chọn</span></p>
                    </label>
                    <input type="file" id="fileInput" name="fileInput" multiple>
                </div>
                <div id="file-editor-container" class="hidden">
                    <p class="form-label">Xem lại và đổi tên tệp:</p>
                    <ul id="file-editor-list" class="file-editor-list"></ul>
                    <div id="file-editor-actions" class="file-editor-actions">
                        <button id="start-upload-btn" class="btn btn-primary">Bắt đầu tải lên</button>
                    </div>
                </div>
                <div id="uploadStatus" class="status-message" style="display: none;"></div>
            </div>
            <div class="card">
                <h2 class="card-title card-header">Lịch sử tải lên của bạn</h2>
                <div id="listLoader" class="text-center hidden" style="padding: 32px 0;">
                    <div class="loader"></div>
                </div>
                <div id="fileListContainer" class="table-container hidden">
                    <table class="file-table">
                        <thead>
                            <tr>
                                <th>Sao chép</th>
                                <th>Tên tệp</th>
                                <th>Kích thước</th>
                                <th>Người tải lên</th>
                                <th>Ngày tải</th>
                            </tr>
                        </thead>
                        <tbody id="fileListBody"></tbody>
                    </table>
                </div>
                <div id="noFilesMessage" class="text-center text-secondary hidden" style="padding: 32px 0;">
                    <p>Bạn chưa tải lên tệp nào.</p>
                </div>
                <div id="errorMessage" class="status-message status-error" style="display: none;"></div>
            </div>
        </div>
    </div>
    <div id="upload-choice-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3 class="modal-header">Xác nhận tải lên</h3>
            <div class="modal-body">
                <p>Bạn đã chọn <strong id="file-count"></strong> tệp. Bạn muốn xử lý chúng như thế nào?</p>
            </div>
            <div class="modal-actions"><button id="upload-individual-btn" class="btn btn-secondary">Tải lên riêng
                    lẻ</button><button id="upload-compress-btn" class="btn btn-primary">Nén thành .zip</button></div>
        </div>
    </div>
    <div id="compress-options-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3 class="modal-header">Tùy chọn nén tệp</h3>
            <form id="compress-form">
                <div class="form-group"><label for="zip-filename" class="form-label">Tên tệp nén (.zip)</label><input
                        type="text" id="zip-filename" class="form-input" required></div>
                <div class="form-group"><label for="zip-password" class="form-label">Mật khẩu (tùy chọn)</label><input
                        type="password" id="zip-password" class="form-input" placeholder="Bỏ trống nếu không cần"></div>
                <div class="modal-actions"><button type="button" id="cancel-compress-btn" class="btn btn-secondary">Hủy
                        bỏ</button><button type="submit" class="btn btn-primary">Bắt đầu nén & Tải lên</button></div>
            </form>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

    <script src="./Asset/Script.js"></script>
</body>

</html>