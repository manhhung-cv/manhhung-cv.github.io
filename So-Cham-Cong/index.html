<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sổ Chấm Công</title>
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        xintegrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
</head>

<body class="platform-mobile">
    <div id="appShell" class="app-shell">
        <nav class="bottom-nav">
            <button class="nav-button active" data-tab="tabLichLamViec" data-title="Lịch Làm Việc"><span class="icon"><i
                        class="fas fa-calendar-alt"></i></span><span class="label">Lịch</span></button>
            <button class="nav-button" data-tab="tabSoChamCong" data-title="Sổ Chấm Công"><span class="icon"><i
                        class="fas fa-clipboard-list"></i></span><span class="label">Sổ Công</span></button>
            <button class="nav-button" data-tab="tabCaiDat" data-title="Cài Đặt"><span class="icon"><i
                        class="fas fa-cog"></i></span><span class="label">Cài Đặt</span></button>
        </nav>

        <div class="app-content-wrapper">
            <header class="app-header">
                <h1 id="headerTitle">Lịch Làm Việc</h1>
            </header>
            <main class="app-content">
                <h1 id="appTitle">Lịch Làm Việc</h1>
                <div id="tabLichLamViec" class="tab-content active">

                    <div class="card">
                        <div class="calendar-controls-header">
                            <button id="prevMonthBtn" class="btn-icon" aria-label="Tháng trước"><i
                                    class="fas fa-chevron-left"></i></button>
                            <h2 id="currentMonthYear">...</h2>
                            <button id="nextMonthBtn" class="btn-icon" aria-label="Tháng sau"><i
                                    class="fas fa-chevron-right"></i></button>
                        </div>
                        <div id="editScheduleBtnContainer">
                            <button id="editScheduleBtn" class="btn btn-secondary btn-full-width"><i
                                    class="fas fa-edit"></i> Sửa Lịch</button>
                            <button id="saveScheduleBtn" class="btn btn-primary btn-full-width" style="display:none;"><i
                                    class="fas fa-check"></i> Lưu Lịch</button>
                        </div>
                        <div id="quickEditControls" style="display:none;">
                            <div class="card" style="margin-bottom: 16px;">
                                <h3 class="card-header">Sửa Lịch Nhanh</h3>
                                <div class="form-group">
                                    <label for="quickEditType">Chọn loại ca:</label>
                                    <select id="quickEditType">
                                        <option value="">Xoá lịch</option>
                                        <option value="ca-ngay">Ca sáng</option>
                                        <option value="ca-dem">Ca tối</option>
                                        <option value="nghi">Nghỉ</option>
                                        <option value="ngay-le">Ngày lễ</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="quickEditMode">Chế độ chọn:</label>
                                    <select id="quickEditMode">
                                        <option value="range">Chọn khoảng ngày</option>
                                        <option value="drag">Kéo thả trên lịch</option>
                                    </select>
                                </div>
                                <div id="dateRangeInputs">
                                    <div class="form-group">
                                        <label for="quickStartDate">Từ ngày:</label>
                                        <input type="date" id="quickStartDate">
                                    </div>
                                    <div class="form-group">
                                        <label for="quickEndDate">Đến ngày:</label>
                                        <input type="date" id="quickEndDate">
                                    </div>
                                    <button id="applyQuickEditBtn" class="btn btn-primary btn-full-width">
                                        <i class="fas fa-magic"></i> Áp dụng cho khoảng ngày
                                    </button>
                                </div>
                                <div id="dragModeInstructions" style="display:none;">
                                    <p
                                        style="color: var(--text-secondary); font-size: 14px; text-align: center; padding: 12px;">
                                        <i class="fas fa-hand-pointer"></i> Nhấn và kéo trên lịch để chọn nhiều ngày
                                    </p>
                                </div>
                            </div>
                        </div>

                        <table class="calendar-table">
                            <thead>
                                <tr id="calendarHeaderRow"></tr>
                            </thead>
                            <tbody id="calendarDays"></tbody>
                        </table>
                    </div>
                </div>
                <div id="tabSoChamCong" class="tab-content">
                    <div class="card" id="statsCard">
                        <h3 class="card-header">Thống Kê Tháng Này</h3>
                        <div class="stats-grid">
                            <div class="stat-item"><span class="stat-label">Lịch làm:</span><span class="stat-value"
                                    id="statsTotalWorkDays">...</span></div>
                            <div class="stat-item"><span class="stat-label">Đã làm:</span><span class="stat-value"
                                    id="statsActualWorkDays">...</span></div>
                            <div class="stat-item"><span class="stat-label">Ngày nghỉ:</span><span class="stat-value"
                                    id="statsLeaveDays">...</span></div>
                            <div class="stat-item"><span class="stat-label">Giờ làm:</span><span class="stat-value"
                                    id="statsTotalHours">...</span></div>
                            <div class="stat-item"><span class="stat-label">Tăng ca:</span><span class="stat-value"
                                    id="statsOvertimeHours">...</span></div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">Bộ lọc</div>
                        <div class="filter-group">
                            <div class="form-group"><label for="logFilterType">Lọc theo:</label><select
                                    id="logFilterType">
                                    <option value="all">Tất cả</option>
                                    <option value="range">Khoảng ngày</option>
                                    <option value="month">Tháng cụ thể</option>
                                </select></div>
                            <div class="form-group" id="logDateRangePicker" style="display:none;"><label
                                    for="logStartDate">Từ ngày:</label><input type="date" id="logStartDate"><label
                                    for="logEndDate" style="margin-top: 10px;">Đến ngày:</label><input type="date"
                                    id="logEndDate"></div>
                            <div class="form-group" id="logMonthPicker" style="display:none;"><label for="logMonth">Chọn
                                    tháng:</label><input type="month" id="logMonth"></div>
                        </div>
                        <div class="button-group">
                            <button id="applyLogFilterBtn" class="btn btn-secondary"><i class="fas fa-filter"></i> Áp
                                dụng</button>
                            <button id="exportLogCsvBtn" class="btn btn-primary"><i class="fas fa-file-csv"></i> Tải
                                CSV</button>
                        </div>
                    </div>
                    <div class="card">
                        <table class="timesheet-log-table">
                            <tbody id="timesheetLogBody"></tbody>
                        </table>
                        <p id="noTimesheetDataMsg" class="no-timesheet-data" style="display:none;">Chưa có dữ liệu.</p>
                    </div>
                </div>
                <div id="tabCaiDat" class="tab-content">
                    <div class="card">
                        <h3 class="card-header">Giao diện</h3>
                        <div class="form-group"><label for="themeSelector">Chọn chủ đề:</label><select
                                id="themeSelector">
                                <option value="default">Mặc định</option>
                                <option value="cute">Dễ Thương</option>
                                <option value="doraemon">Doraemon</option>
                            </select></div>
                    </div>
                    <div class="card">
                        <h3 class="card-header">Ngày đầu trong tuần</h3>
                        <div class="calendar-settings-inline">
                            <label for="firstDaySwitch">Bắt đầu tuần từ Thứ Hai</label>
                            <label class="switch"><input type="checkbox" id="firstDaySwitch"><span
                                    class="slider"></span></label>
                        </div>
                    </div>
                    <div class="card">
                        <h3 class="card-header">Ngày bắt đầu công</h3>
                        <div class="form-group">
                            <label for="startWorkDayInput">Ngày bắt đầu tính công hàng tháng:</label>
                            <input type="number" id="startWorkDayInput" min="1" max="31" value="1">
                        </div>
                    </div>
                     <div class="card">
                        <h3 class="card-header">Chế độ hiển thị lịch</h3>
                        <div class="form-group">
                            <label for="displayModeSelect">Chọn chế độ:</label>
                            <select id="displayModeSelect">
                                <option value="fullMonth">Hiển thị toàn bộ tháng</option>
                                <option value="workPeriod">Hiển thị theo chu kỳ công</option>
                            </select>
                        </div>
                    </div>
                    <div class="card">
                        <h3 class="card-header">Dữ liệu cơ bản</h3>
                        <div class="form-group">
                            <label for="baseHoursInput">Số giờ làm cơ bản / ngày</label>
                            <input type="number" id="baseHoursInput" min="1" max="24" value="8">
                        </div>
                    </div>
                    <div class="card">
                        <h3 class="card-header">Xuất dữ liệu</h3>
                        <div class="form-group"><label for="exportDataType">Loại dữ liệu xuất:</label><select
                                id="exportDataType">
                                <option value="all">Toàn bộ</option>
                                <option value="schedule">Chỉ Lịch</option>
                                <option value="timesheet">Chỉ Chấm Công</option>
                            </select></div>
                        <div class="button-group"><button id="exportDataBtn" class="btn btn-secondary"><i
                                    class="fas fa-file-export"></i> Xuất File JSON</button></div>
                    </div>
                    <div class="card">
                        <h3 class="card-header">Nhập dữ liệu</h3>
                        <div class="form-group"><label for="importFile">Nhập từ file JSON:</label><input type="file"
                                id="importFile" accept=".json"
                                style="padding: 10px; border: 1px solid var(--separator-color); border-radius: var(--radius-m); background: var(--input-bg);">
                        </div>
                        <div class="button-group"><button id="importDataBtn" class="btn btn-primary"><i
                                    class="fas fa-file-import"></i> Nhập Dữ Liệu</button></div>
                        <p style="font-size:13px; color:var(--text-secondary); margin-top:16px;">Lưu ý: Dữ liệu nhập sẽ
                            ghi đè.</p>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <div id="timesheetModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Chấm công</h3>
            </div>
            <div class="modal-body">
                <form id="timesheetForm">
                    <input type="hidden" id="timesheetDate">
                    <div class="form-group">
                        <label for="entryType">Loại ngày công</label>
                        <select id="entryType">
                            <option value="work">Ngày làm</option>
                            <option value="paid_leave">Nghỉ phép</option>
                            <option value="unpaid_leave">Nghỉ không lương</option>
                            <option value="company_holiday">Công ty cho nghỉ</option>
                        </select>
                    </div>
                    <div id="overtimeFields" style="display: none;">
                        <div class="form-group"><label for="overtimeHours">Giờ tăng ca:</label><input type="number"
                                id="overtimeHours" min="0" max="23" placeholder="0"></div>
                        <div class="form-group"><label for="overtimeMinutes">Phút tăng ca:</label><input type="number"
                                id="overtimeMinutes" min="0" max="59" placeholder="0"></div>
                    </div>
                    <div class="form-group"><label for="notes">Ghi chú:</label><textarea id="notes" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-cancel">Hủy</button>
                <button type="button" class="btn btn-confirm btn-primary">Xác nhận</button>
            </div>
        </div>
    </div>
    <div id="actionConfirmModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="actionConfirmModalTitle">Hành động</h3>
            </div>
            <div class="modal-body">
                <p>Bạn muốn làm gì với mục chấm công này?</p>
                <input type="hidden" id="actionConfirmDate">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-edit-timesheet"><i class="fas fa-pencil-alt"></i> Sửa</button>
                <button type="button" class="btn btn-danger btn-delete-timesheet"><i class="fas fa-trash-alt"></i>
                    Xoá</button>
            </div>
        </div>
    </div>

</body>
<script src="./script.js"></script>

</html>